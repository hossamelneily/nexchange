{% extends "core/base.html" %}
{% load i18n %}

{% block main %}
			<div class="page-header">
				<h1>
					{% trans "BTC" %}<small> {{ action }} </small>
				</h1>
			</div>
			
			<div class="row">
				<div class="col-xs-6 col-sm-6 col-md-6">
								
					<center>				
					 <button type="button" class="btn btn-primary btn-lg" onclick="window.location.href='/order/add/'"> {% trans "New" %}</button>
					 <button type="button" class="btn btn-alert btn-lg" onclick="window.location.href='/'"> {% trans "Exit" %}</button>
					</center>				
							
				 </div>
				
				<div class="col-xs-6 col-sm-6 col-md-6">  
					<form method="post" class="form">
					{{form}}
				    {% csrf_token %}
					<input type="submit" value="Enviar" />
				    </form>
			    </div>
			</div>
			
			<div class="row">
			<div class="col-xs-12 col-sm-12 col-md-12"> 
			  <table class="table table-hover table-condensed">	 
  				<tr>
  					<th>{% trans "Date" %}</th>
  					<th>{% trans "Reference" %}</th>
  					<th>{% trans "Currency" %}</th>
  					<th>{% trans "Amount" %}</th>
  					<th>{% trans "BTC" %}</th>
  					<th>{% trans "Paid" %}</th>
  					<th>{% trans "Released" %}</th>
  					<th>{% trans "Completed" %}</th>
  				</tr>
	    		
	    		{% for order in orders %}
	    		  {% if order.paid == 0 %}
			        <tr class="danger">
			       {% elif order.provisional == 1 %}
			        <tr class="warning">
			       {% else %}
			        <tr >
			       {% endif %}
			       
			        	<td>{{ order.created_on |date:"D d M Y"}}</td>
		            	<td>{{ order.unique_reference }}</td>
		            	<td>{{ order.currency.code }}</td>
		                <td>{{ order.amount_cash }}</td>
		            	<td>{{ order.amount_btc }}</td>

		            	<td>
							{% if order.frozen %}
								{% if order.is_paid %}
									<button type="button" style="width:90px" data-switch-toggle="readonly" disabled="disabled"  class="btn btn-success">{% trans 'Paid' %}</button>
								{% else %}
									<button type="button" style="width:90px" data-switch-toggle="readonly" disabled="disabled" class="btn btn-danger">{% trans 'Not Paid' %}</button>
								{% endif %}
							{% else %}
								<label class="checkbox-inline">
									<input type="checkbox"

										data-offstyle="danger"
										data-onstyle="success"
										{% if order.is_paid %}
											checked 
										{% endif %}
										data-toggle="toggle"  
										data-on="{% trans 'Paid' %}" 
										data-width="90px"
										data-off="{% trans 'Not Paid' %}">
								</label>
							{% endif %}
						</td>

		            	{% if order.is_released == 1 %}
		            	<td><img src="/static/icons/check_16.png" \></td>
		            	{% else %}
		                <td><img src="/static/icons/close_16.png" \></td>
		            	{% endif %}
		            	{% if order.is_complete == 1 %}
		            	<td><img src="/static/icons/check_16.png" \></td>
		            	{% else %}
		                <td><img src="/static/icons/close_16.png" \></td>
		            	{% endif %}
	
			        </tr>
	        	        
	        	{% empty %}

		    		<tr>
		    			<td colspan="10">
		    				<h3>{% trans "No records found" %}</h3>	    
		    		    </td>
		    		</tr>

	    		{% endfor %}
			   
			  </table>
			</div>
		    </div>

		<div class="pagination">
		    <span class="step-links">
		        {% if orders.has_previous %}
		            <a href="?page={{ orders.previous_page_number }}">{% trans "previous" %}</a>
		        {% endif %}

		        <span class="current">
		            Page {{ orders.number }} of {{ orders.paginator.num_pages }}.
		        </span>

		        {% if orders.has_next %}
		            <a href="?page={{ orders.next_page_number }}">{% trans "next" %}</a>
		        {% endif %}
		    </span>
		</div>
	 
 <script>	
   $(function() {
    $( "#id_date" ).datepicker({ dateFormat: 'yy-mm-dd' }); 
  });

 
  </script>	
			
			
{% endblock %}

{% block extra_js_footer %}
<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
<script>

 //$('').bootstrapToggle('enable')

  $(function() {
    $('.checkbox-inline input').change(function() {
    	console.log($(this).prop('checked'));      
    })
  })	

</script>
{% endblock%}